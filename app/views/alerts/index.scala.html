@(alertLog: uk.bl.monitrix.model.AlertLog)

@import tags.{alertTag, navbar}

@main("Monitrix - Alerts") {
  @navbar("/alerts")
}{
  @defining(alertLog.getOffendingHosts) { offendingHosts =>
    <h1>@alertLog.countAll <span class="monitrix-h1-subline">Alerts from</span> @offendingHosts.size  <span class="monitrix-h1-subline">hosts</span></h1>
    
    <table class="table table-condensed">
      <thead>
        <tr>
          <th>Offending Host</th>
          <th>Alerts</th>
          <th>#</th>
        </tr>
      </thead>
      <tbody>
        @for(host <- offendingHosts) {
          @for(alertType <- alertLog.getAlertTypesForHost(host)) {
            <tr>
              <td><a href="@routes.Hosts.getHostInfo(host)">@host</a></td>
              <td>@alertTag(alertType)</td>
              <td>@alertLog.countAlertsForHost(host, alertType)</td>
            </tr>
          }
        }
      </tbody>
    </table>
  }
}